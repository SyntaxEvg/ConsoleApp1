Severity	Code	Description	Project	File	Line	Suppression State
Error (active)	RZ1006	The foreach block is missing a closing "}" character.  Make sure you have a matching "}" character for all the "{" characters within this block, and that none of the "}" characters are being interpreted as markup.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	76	
Error (active)	RZ1025	The "fieldset" element was not closed.  All elements must be either self-closing or have a matching end tag.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	78	
Error (active)	RZ1006	The foreach block is missing a closing "}" character.  Make sure you have a matching "}" character for all the "{" characters within this block, and that none of the "}" characters are being interpreted as markup.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	82	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	91	
Error (active)	RZ1026	Encountered end tag "fieldset" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	92	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	93	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	94	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	95	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	96	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	97	
Error (active)	RZ1025	The "div" element was not closed.  All elements must be either self-closing or have a matching end tag.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	100	
Error (active)	RZ1006	The foreach block is missing a closing "}" character.  Make sure you have a matching "}" character for all the "{" characters within this block, and that none of the "}" characters are being interpreted as markup.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	145	
Error (active)	RZ1026	Encountered end tag "p" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	148	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	149	
Error (active)	RZ1025	The "div" element was not closed.  All elements must be either self-closing or have a matching end tag.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	151	
Error (active)	RZ1006	The foreach block is missing a closing "}" character.  Make sure you have a matching "}" character for all the "{" characters within this block, and that none of the "}" characters are being interpreted as markup.		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	155	
Error (active)	RZ1026	Encountered end tag "p" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	158	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	159	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	160	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	161	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	162	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	163	
Error (active)	RZ1026	Encountered end tag "a543bfd4a0146f6f615459243b3c497100f1fb9100ae73e1b94c728a90cdbe7d16813" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	176	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	177	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	178	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	179	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	180	
Error (active)	RZ1026	Encountered end tag "div" with no matching start tag.  Are your start/end tags properly balanced?		C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	181	
Error (active)	CS1061	'RoleViewModel' does not contain a definition for 'Key' and no accessible extension method 'Key' accepting a first argument of type 'RoleViewModel' could be found (are you missing a using directive or an assembly reference?)	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	79	
Error (active)	CS1579	foreach statement cannot operate on variables of type 'RoleViewModel' because 'RoleViewModel' does not contain a public instance or extension definition for 'GetEnumerator'	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	82	
Error (active)	CS0136	A local or parameter named 'mode' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	155	
Error (active)	CS0106	The modifier 'public' is not valid for this item	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS1002	; expected	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS1513	} expected	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS1519	Invalid token ';' in a member declaration	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS1022	Type or namespace definition, or end-of-file expected	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS1022	Type or namespace definition, or end-of-file expected	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0116	A namespace cannot directly contain members such as fields, methods or statements	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0116	A namespace cannot directly contain members such as fields, methods or statements	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0116	A namespace cannot directly contain members such as fields, methods or statements	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0116	A namespace cannot directly contain members such as fields, methods or statements	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0102	The type '<invalid-global-code>' already contains a definition for 'Url'	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0102	The type '<invalid-global-code>' already contains a definition for 'Component'	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0102	The type '<invalid-global-code>' already contains a definition for 'Json'	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0102	The type '<invalid-global-code>' already contains a definition for 'Html'	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS7014	Attributes are not valid in this context.	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0103	The name 'get' does not exist in the current context	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	CS0201	Only assignment, call, increment, decrement, await, and new object expressions can be used as a statement	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	
Error (active)	IDE1007	The name 'set' does not exist in the current context.	HAS.Modules.UAS	C:\DotnetFolder\source\HAS.Modules.UAS-master\HAS.Modules.UAS-CSHTML no job\Areas\Admin\Views\AccessToken\Create.cshtml	157	

=====================
# Создаём папку для сертификатов
sudo mkdir -p /etc/nginx/ssl

# Копируем PFX файл на сервер (с вашего компьютера)
# Используйте SCP, SFTP или USB
scp /path/to/certificate.pfx root@10.13.20.51:/etc/nginx/ssl/

sudo mv /path/to/certificate.pfx /etc/nginx/ssl/

cd /etc/nginx/ssl

# 1. Извлекаем приватный ключ (потребуется пароль от PFX)
sudo openssl pkcs12 -in certificate.pfx -nocerts -out server.key -nodes

# 2. Извлекаем сертификат
sudo openssl pkcs12 -in certificate.pfx -clcerts -nokeys -out server.crt

# 3. Извлекаем цепочку CA сертификатов (если есть)
sudo openssl pkcs12 -in certificate.pfx -cacerts -nokeys -out ca-bundle.crt

# 4. Объединяем сертификат и цепочку CA
sudo cat server.crt ca-bundle.crt > server-chain.crt

sudo chmod 600 /etc/nginx/ssl/server.key
sudo chmod 644 /etc/nginx/ssl/server.crt
sudo chmod 644 /etc/nginx/ssl/server-chain.crt
sudo chown root:root /etc/nginx/ssl/*

# Проверяем
ls -la /etc/nginx/ssl/

# Проверяем, что сертификат корректный
openssl x509 -in /etc/nginx/ssl/server.crt -text -noout | head -20

# Проверяем домен в сертификате
openssl x509 -in /etc/nginx/ssl/server.crt -noout -subject

# Проверяем срок действия
openssl x509 -in /etc/nginx/ssl/server.crt -noout -dates

# Проверяем соответствие ключа и сертификата (хеши должны совпадать!)
openssl x509 -noout -modulus -in /etc/nginx/ssl/server.crt | md5sum
openssl rsa -noout -modulus -in /etc/nginx/ssl/server.key | md5sum
```

---

## Этап 2: Настройка DNS (на стороне вашей сети)

Вам нужно попросить администратора DNS добавить запись:
```
Тип: A
Имя: ea.ty.ea
IP: 10.13.20.51

====
sudo nano /etc/nginx/conf.d/wordpress-ssl.conf

# Редирект с HTTP на HTTPS
server {
    listen 80;
    server_name ea.ty.ea 10.13.20.51;
    
    # Редирект на HTTPS
    return 301 https://ea.ty.ea$request_uri;
}

# Основной HTTPS сервер
server {
    listen 443 ssl http2;
    server_name ea.ty.ea 10.13.20.51;
    
    root /var/www;
    index index.php index.html;
    
    # SSL сертификаты
    ssl_certificate /etc/nginx/ssl/server-chain.crt;
    ssl_certificate_key /etc/nginx/ssl/server.key;
    
    # Современные SSL настройки
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # SSL сессии
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 1d;
    ssl_session_tickets off;
    
    # OCSP Stapling (если CA поддерживает)
    # ssl_stapling on;
    # ssl_stapling_verify on;
    # ssl_trusted_certificate /etc/nginx/ssl/ca-bundle.crt;
    
    # Заголовки безопасности
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    # HSTS (принудительный HTTPS) - раскомментируйте после проверки
    # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    # Логи
    access_log /var/log/nginx/ea.ty.ea-access.log;
    error_log /var/log/nginx/ea.ty.ea-error.log;
    
    # Максимальный размер загружаемых файлов
    client_max_body_size 64M;
    
    # WordPress permalinks
    location / {
        try_files $uri $uri/ /index.php?$args;
    }
    
    # PHP обработка
    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_pass unix:/run/php-fpm/www.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param HTTPS on;
        include fastcgi_params;
        
        # Таймауты
        fastcgi_read_timeout 300;
        fastcgi_send_timeout 300;
        fastcgi_connect_timeout 60;
    }
    
    # Запрет доступа к скрытым файлам
    location ~ /\. {
        deny all;
    }
    
    # Защита wp-config.php
    location ~* wp-config.php {
        deny all;
    }
    
    # Защита xmlrpc.php (часто атакуют)
    location = /xmlrpc.php {
        deny all;
    }
    
    # Кэширование статики
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
    
    # Favicon
    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }
    
    # Robots.txt
    location = /robots.txt {
        log_not_found off;
        access_log off;
    }
}

# Проверяем конфигурацию
sudo nginx -t

# Если всё OK, перезапускаем
sudo systemctl restart nginx

# Проверяем статус
sudo systemctl status nginx
================
cd /var/www

# Меняем URL на новый домен с HTTPS
sudo -u nginx wp option update home 'https://ea.ty.ea' --allow-root
sudo -u nginx wp option update siteurl 'https://ea.ty.ea' --allow-root

# Проверяем
sudo -u nginx wp option get home --allow-root
sudo -u nginx wp option get siteurl --allow-root
==================
sudo nano /var/www/wp-config.php

/** SSL и HTTPS настройки */
define('FORCE_SSL_ADMIN', true);
define('FORCE_SSL_LOGIN', true);

// Определяем HTTPS
if (isset($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] === 'https') {
    $_SERVER['HTTPS'] = 'on';
}
if (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') {
    $_SERVER['HTTPS'] = 'on';
}
if (isset($_SERVER['SERVER_PORT']) && $_SERVER['SERVER_PORT'] == 443) {
    $_SERVER['HTTPS'] = 'on';
}

// Новый домен
define('WP_HOME', 'https://ea.ty.ea');
define('WP_SITEURL', 'https://ea.ty.ea');
==================
cd /var/www

# Заменяем старые URL на новые (если были другие)
sudo -u nginx wp search-replace 'http://10.13.20.51' 'https://ea.ty.ea' --allow-root

# Заменяем HTTP на HTTPS
sudo -u nginx wp search-replace 'http://ea.ty.ea' 'https://ea.ty.ea' --allow-root

# Очищаем кэш
sudo -u nginx wp cache flush --allow-root 2>/dev/null || true
==================
# Удаляем кэши WordPress
sudo rm -rf /var/www/wp-content/cache/*
sudo rm -rf /var/www/wp-content/uploads/elementor/css/*

# Перезапускаем PHP-FPM
sudo systemctl restart php-fpm
======================
# Проверяем HTTP (должен редиректить на HTTPS)
curl -I http://ea.ty.ea

# Проверяем HTTPS
curl -I https://ea.ty.ea

# Если сертификат от корпоративного CA и curl не доверяет ему
curl -Ik https://ea.ty.ea

# Проверяем SSL подробно
openssl s_client -connect ea.ty.ea:443 -servername ea.ty.ea < /dev/null 2>/dev/null | openssl x509 -noout -subject -dates
